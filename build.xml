<?xml version="1.0" encoding="UTF-8"?>


<project name="de.uni_koblenz.jgstreetmap" basedir="." default="build">


	<!-- project name -->
	<property name="projectname" value="jgstreetmap" />

	<!-- project directory -->
	<property name="project.dir" value="../${projectname}" />

	<property name="comlib.dir" value="../common/lib" />
	
	<property name="classes.dir" value="./build/classes"/>
	<!-- classpath -->
	<path id="classpath">
		<pathelement location="${classes.dir}" />
		<fileset dir="${project.dir}/lib" includes="**/*.jar" />
		<fileset dir="${comlib.dir}" includes="**/*.jar" />
	</path>

	<!-- main class name -->
	<property name="main" value="JGStreetMap" />

	<!-- directory of general ant file -->
	<property name="common.dir" value="../common" />


	<!-- build -->
	<!-- main target - calls targets clean and jar -->
	<target name="build" depends="cleanall,jar" />

	<!-- release -->
	<!-- calls targets modify, clean, jar, test and document -->
	<target name="release" depends="modify,cleanall,jar,test,document" />

	<!-- modify -->
	<!-- modifies the projects main class -->
	<target name="modify">
		<!-- calls target modify in general ant file ${ant}/build.xml -->
		<ant dir="${common.dir}" antfile="build.xml" target="modify" />
	</target>

	<!-- clean -->
	<!-- deletes some generated files -->
	<target name="clean">
		<!-- calls target clean in general ant file ${ant}/build.xml -->
		<ant dir="${common.dir}" antfile="build.xml" target="clean" />
		<delete dir="${src.dir}/de/uni_koblenz/${projectname}/osmschema" />
	</target>

	<!-- clean all -->
	<!-- deletes all generated files -->
	<target name="cleanall">
		<!-- calls target cleanall in general ant file ${ant}/build.xml -->
		<ant dir="${common.dir}" antfile="build.xml" target="cleanall" />
	</target>

	<!-- jgralab.jarfiletest -->
	<!-- test existence of jgralab jar file and generates it if not existing -->
	<target name="jgralabjarfiletest">
		<!-- calls target jarfiletest in general ant file ${ant}/build.xml -->
		<ant dir="${common.dir}" antfile="build.xml" target="jarfiletest">
			<property name="projectname" value="jgralab" />
		</ant>
	</target>
	
	<!--<target name="convertschema">
		<java classname="net.sf.saxon.Transform" 
		      classpathref="classpath">
			<sysproperty key="javax.xml.parsers.SAXParserFactory"
				     value="org.apache.xerces.jaxp.SAXParserFactoryImpl"/>
			<arg line="-s:schema.xmi -xsl:../jgralab/src/de/uni_koblenz/jgralab/utilities/xmi2tgschema/XMI2TGSchema.xsl -o:src/de/uni_koblenz/jgstreetmap/OsmSchema.tg tool=ea schemaName=de.uni_koblenz.jgstreetmap.osmschema.OsmSchema"/>
		</java>
	</target>-->
	
	<!-- generateschema -->
	<!-- generates schema sources -->
	<target name="generateschema" depends="clean">
		<echo>../common/build.xml generateschema - executing TgSchema2Java</echo>
		<ant dir="${common.dir}" antfile="build.xml" target="generateschema">
			<property name="subprojectname" value="" />
			<property name="schemafile" value="OsmSchema.tg" />
		</ant>
		<echo>generateschema finished</echo>
	</target>

	<!-- generateparser -->
	<!-- generates parser sources -->
	<target name="generateparser">
		<!-- calls target jar in general ant file ${ant}/build.xml -->
		<!-- <ant dir="${common.dir}" antfile="build.xml" target="generateparser">
			<property name="grammarfile" value = ""/>			
		</ant> -->
	</target>

	<!-- compile -->
	<!-- compiles all existing sources -->
	<target name="compile" depends="generateschema,generateparser">
		<!-- calls target compile in general ant file ${ant}/build.xml -->
		<ant dir="${common.dir}" antfile="build.xml" target="compile" />
	</target>

	<!-- jar -->
	<!-- creates a jar file -->
	<target name="jar" depends="compile">
		<!-- calls target jar in general ant file ${ant}/build.xml -->
		<ant dir="${common.dir}" antfile="build.xml" target="unjar" />
		<!-- calls target jar in general ant file ${ant}/build.xml -->
		<ant dir="${common.dir}" antfile="build.xml" target="jar" />
	</target>

	<!-- run -->
	<!-- test if the jarfile exists and executes it -->
	<target name="run">
		<!-- calls target run in general ant file ../common/build.xml -->
		<ant dir="${common.dir}" antfile="build.xml" target="run" />
	</target>

	<!-- test -->
	<!-- tests all exisiting junit test cases -->
	<target name="test" depends="compile">
		<!-- calls target test in general ant file ../common/build.xml -->
		<ant dir="${common.dir}" antfile="build.xml" target="test" />
	</target>

	<!-- document -->
	<!-- documents all existing sources -->
	<target name="document" depends="generateschema,generateparser">
		<!-- calls target document in general ant file ../common/build.xml -->
		<ant dir="${common.dir}" antfile="build.xml" target="document" />
	</target>

</project>
